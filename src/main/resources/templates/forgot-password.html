<!doctype html>
<html lang="en" dir="ltr" xmlns:th="http://thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">

	<link rel="icon" th:href="@{/assets/Images/favicon.png}" type="image/x-icon" />

	<title>SK Forgot Password</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- Bootstrap Core and vandor -->
	<link rel="stylesheet" th:href="@{/assets/plugins/bootstrap/css/bootstrap.min.css}" />

	<!-- Core css -->
	<link rel="stylesheet" th:href="@{/assets/css/main.css}" />
	<link rel="stylesheet" th:href="@{/assets/css/theme1.css}" />


</head>

<body class="font-montserrat">

	<div class="auth">
		<div class="auth_left">
			<div class="card">
				<div class="text-center mb-3">
					<a class="header-brand" th:href="@{/login}"><img th:src="@{/assets/Images/sklogo.svg}"
							class="img-fluid" alt="" /></a>
				</div>
				<div class="card-body">
					<h4>Forgot password</h4>
					<p class="text-muted">Enter your email address and your password will be reset and emailed to you.
					</p>

					<form class="container-fuild" id="needs-validation"  
						th:action="@{/login/forgotPassword/verifyCode}" method="get" onsubmit="return validateFormData()">
						<div class="row">
							<div class="col-md-12 col-sm-12 col-12">
								<div class="form-group">
									<label class="form-label" for="inputEmail4">Email address</label>
									<input type="email" class="form-control" id="inputEmail4" th:if="${error == null}"
										placeholder="Enter email address" name="userEmail" th:value="${email}" autocomplete="email">
									<div th:if="${error == null}">
										<small class="invalid-email" style="color: red;"></small>
									</div>
									<input type="email" class="form-control" th:if="${error != null}" id="inputEmail4"
										placeholder="Enter email address" name="userEmail"  
										th:value="${email}" autocomplete="email" style="border-color: red;">
									<div th:if="${error != null}">
										<small class="invalid-email" th:text="${error}" style="color: red;"></small>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-lg-12 col-sm-12 col-12 text-center">
								<button class="btn btn-primary w-100 reg" style="width:100%;" type="submit">Reset
									password</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
		<div class="auth_right full_img"></div>
	</div>
	<script th:src="@{/assets/libs/js/jquery-3.6.0.min.js}"></script>
	<script th:src="@{/assets/bundles/lib.vendor.bundle.js}"></script>
	<script th:src="@{/assets/js/core.js}"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
	<script id="rendered-js">
		
			function validateFormData() {
				let usrEmail = $("#inputEmail4").val().trim();
				if (usrEmail === "") {
					$(".invalid-email").text("Email address cannot be empty");
					$("#inputEmail4").css("border-color", "red");
					return false;
				} else {
					$(".invalid-email").text("");
					$("#inputEmail4").css("border-color", "#E8E9E9");
				} 
				
				let regExpPattern = new RegExp(/^(?!\d)[A-Za-z][\w.-]*@skinternational\.[a-zA-Z]{2,}$/);
				if (!(regExpPattern.test(usrEmail))) {
					$(".invalid-email").text("Please enter a valid email address");
					$("#inputEmail4").css("border-color", "red");
				} else {
					$(".invalid-email").text("");
					$("#inputEmail4").css("border-color", "#E8E9E9");
					sessionStorage.setItem("userEmail", $("#hiddenEmail").val());
					return true;
				}
				return false;
			}
		
		$(document).ready(function () {
			$("#inputEmail4").on("change", function(){
				let usrEmail = $("#inputEmail4").val().trim();
				if (usrEmail === "") {
					$(".invalid-email").text("Email address cannot be empty");
					$("#inputEmail4").css("border-color", "red");
				} else {
					$(".invalid-email").text("");
					$("#inputEmail4").css("border-color", "#E8E9E9");
				} 
				
				let regExpPattern = new RegExp(/^(?!\d)[A-Za-z][\w.-]*@skinternational\.[a-zA-Z]{2,}$/);
				if (!(regExpPattern.test(usrEmail))) {
					$(".invalid-email").text("Please enter a valid email address");
					$("#inputEmail4").css("border-color", "red");
				} else {
					$(".invalid-email").text("");
					$("#inputEmail4").css("border-color", "#E8E9E9");
				}
				return false;
			});
		});
	</script>

</body>

</html>